# discord


## invite object

```json
{
  "userId": "string",
  "invite": "string",
  "timestamp": "<unix-timestamp>"
}
```

## **Requests**

|            Route             |        Description        |
| :--------------------------: | :-----------------------: |
| [GET /discord/invites](#get-discord-invites) | return all the invites generated |
[POST /discord/invites](#post-discord-invites) | generates a invite for a user |
---

## **GET /discord/invites**

- This API can only be accessed by super user and if the query param contains userId and the userId matches the userId of the user then it return the invite generated by that user

returns all the invites if there is no query param sent in the url, if there is a query param userId it return invite generated for a particulat user

- **Query**

  - Optional: `userId=[string]`: if this is provided it returns the invite for a pariticular user if the userId of the user matches the userId in query param, or the user is super user, other it return 403

- **Headers**  
  None
- **Cookie**  
  rds-session: `<JWT>`

- **Success Response:**

  - **Code:** 200
    - **Content:**
    ```json
    {
      "message": "invite returned successfully" || "invites returned successfully",
      "invite": ["<invite object>, <invite object>"] || "<invite object>" 
    }
    ```

- **Error Responses:**
  - **Code:** 401
    - **Content:**
    ```json
    {
      "statusCode": 401,
      "error": "Unauthorized",
      "message": "You are not authorized for this action."
    }
    ```
  - **Code:** 403

    - **Content:**
      ```json
      {
        "message": "You do not have permission to access this resource."
      }
      ```
    - **Code:** 404

    - **Content:**
      ```json
      {
        "message": "User not found."
      }
      ```
  - **Code:** 500
    - **Content:**
    ```json
    {
      "statusCode": 500,
      "error": "Internal Server Error",
      "message": "Something went wrong. Please contact admin"
    }
    ```

## **POST /discord/invites**

- This Api is used to create a discord invite for the user, invite for a particular user can be generated by a super user or a that user only, invite for a particular user can be created only once

- **Params**\
    None
- **Query**\
    None
- **Body**\
    `{ userId: <string> }`
- **Headers**\
    None
- **Cookie**\
    None
- **Success Response:**
    - **Code:** 201
        - **Content:** 
        ```json
       {
         "message": "Invite created successfully."
       }
      ```
  - **Code:** 401
    - **Content:**
      ```json
        { 
          "statusCode": 401,
          "error": "Unauthorized", 
          "message": "Unauthenticated user" 
        }
      ```
  - **Code:** 404
    - **Content:**
      ```json
        { 
          "message": "user doesn't exist"
        }
      ```
  - **Code:** 409
    - **Content:**
      ```json
        { 
          "message": "invite already exists"
        }
      ```

- **Error Response:**
    - **Code:** 500
        - **Content:**
          ```json
           { 
             "statusCode": 500,
             "error": "Internal Server Error", 
             "message": "An internal server error occurred" 
           }
      ```
